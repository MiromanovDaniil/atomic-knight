import './polyfills.server.mjs';
import{$ as b,Aa as E,Ba as K,Ca as T,Da as $,Fa as V,H as w,Ia as z,M as m,R as O,S as j,W as a,X as f,aa as p,ba as I,ca as r,da as i,ea as v,f as g,fa as G,ga as B,ha as F,ia as C,ja as u,ka as l,la as N,ma as k,na as c,ta as A,xa as D}from"./chunk-QELFK4PM.mjs";function q(n,t){if(n&1&&(r(0,"p"),l(1),i()),n&2){let e=u();a(),N(e.moveNumber||"")}}function J(n,t){n&1&&(G(0),v(1,"img",2),B())}var x=class n{moveNumber=null;highlight=!1;firstColor=!1;secondColor=!1;hasKnight=!1;static \u0275fac=function(e){return new(e||n)};static \u0275cmp=m({type:n,selectors:[["app-cell"]],inputs:{moveNumber:"moveNumber",highlight:"highlight",firstColor:"firstColor",secondColor:"secondColor",hasKnight:"hasKnight"},standalone:!0,features:[c],decls:3,vars:8,consts:[[1,"cell"],[4,"ngIf"],["src","/assets/svg/knight.svg","width","50","height","50",2,"filter","brightness(0) saturate(100%) invert(44%) sepia(94%) saturate(4953%) hue-rotate(95deg) brightness(98%) contrast(105%)","pointer-events","none"]],template:function(e,o){e&1&&(r(0,"div",0),b(1,q,2,1,"p",1)(2,J,2,0,"ng-container",1),i()),e&2&&(I("highlight",o.highlight)("first-color-cell",o.firstColor)("second-color-cell",o.secondColor),a(),p("ngIf",!o.hasKnight),a(),p("ngIf",o.hasKnight))},dependencies:[K],styles:[".cell[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;position:relative;width:50px;height:50px;font-size:1.25rem;font-weight:700;color:#283618}.cell.first-color-cell[_ngcontent-%COMP%]{background-color:#fefae0}.cell.second-color-cell[_ngcontent-%COMP%]{background-color:#dda15e}.cell.highlight[_ngcontent-%COMP%]{background:linear-gradient(to bottom right,#d4ed81,#7da153)}"]})};var h=class n{board=[];boardSubject=new g(this.initBoard());moveCount=0;moveCountSubject=new g(0);knightPosition=null;knightPositionSubject=new g(null);result=0;resultSubject=new g(0);knightMoves=[{x:2,y:1},{x:2,y:-1},{x:-2,y:1},{x:-2,y:-1},{x:1,y:2},{x:1,y:-2},{x:-1,y:2},{x:-1,y:-2}];board$=this.boardSubject.asObservable();moveCount$=this.moveCountSubject.asObservable();knightPosition$=this.knightPositionSubject.asObservable();result$=this.resultSubject.asObservable();initBoard(){return this.board=Array.from({length:10},()=>Array(10).fill(null)),this.moveCount=0,this.knightPosition=null,this.board}restartGame(){this.board=Array.from({length:10},()=>Array(10).fill(null)),this.moveCount=0,this.result=0,this.boardSubject.next(this.board),this.moveCountSubject.next(this.moveCount),this.knightPositionSubject.next(this.knightPosition),this.resultSubject.next(this.result)}makeMove(t,e){return this.board[t][e]=++this.moveCount,this.moveCountSubject.next(this.moveCount),this.knightPositionSubject.next(this.knightPosition),this.board}isBoardEmpty(){return this.moveCount==0}getMoveCount(){return this.moveCount}isMoveValid(t,e,o){return o.some(s=>s.x===t&&s.y===e)}getPossibleMoves(t,e){return this.knightMoves.map(o=>({x:t+o.x,y:e+o.y})).filter(o=>this.isInBounds(o.x,o.y)&&this.board[o.x][o.y]===null)}isInBounds(t,e){return t>=0&&t<10&&e>=0&&e<10}resetGame(){this.initBoard()}static \u0275fac=function(e){return new(e||n)};static \u0275prov=w({token:n,factory:n.\u0275fac,providedIn:"root"})};function L(n,t){if(n&1){let e=F();r(0,"app-cell",7),C("click",function(){let s=O(e).index,d=u().index,Z=u();return j(Z.onCellClick(d,s))}),i()}if(n&2){let e=t.$implicit,o=t.index,s=u().index,d=u();p("moveNumber",e)("highlight",d.isPossibleMove(s,o))("firstColor",d.isFirstColor(s,o))("secondColor",d.isSecondColor(s,o))("hasKnight",d.hasKnight(s,o))}}function Q(n,t){if(n&1&&(r(0,"div",5),b(1,L,1,5,"app-cell",6),i()),n&2){let e=t.$implicit;a(),p("ngForOf",e)}}var _=class n{constructor(t){this.gameService=t}board=[];possibleMoves=[];knightPosition=null;result="";moveCount=0;ngOnInit(){this.gameService.board$.subscribe(t=>{this.board=t,this.board.every(e=>e.every(o=>o===null))&&(this.possibleMoves=[])}),this.gameService.moveCount$.subscribe(t=>{this.moveCount=t,t<100&&t>0&&this.possibleMoves.length==0&&(this.result="Oops... You losed!"),t==100&&(this.result="Congratulations, you won!")}),this.gameService.knightPosition$.subscribe(t=>{this.knightPosition=t}),this.gameService.result$.subscribe(t=>{this.result=""}),this.resetGame()}resetGame(){this.board=this.gameService.initBoard(),this.possibleMoves=[],this.knightPosition=null,this.result=""}onCellClick(t,e){(this.gameService.isMoveValid(t,e,this.possibleMoves)||this.gameService.isBoardEmpty())&&(this.possibleMoves=this.gameService.getPossibleMoves(t,e),this.board=this.gameService.makeMove(t,e),this.knightPosition={x:t,y:e})}isPossibleMove(t,e){return this.possibleMoves.some(o=>o.x===t&&o.y===e)}isFirstColor(t,e){return(t+e)%2===0}isSecondColor(t,e){return(t+e)%2!==0}hasKnight(t,e){return this.knightPosition?.x==t&&this.knightPosition?.y==e}static \u0275fac=function(e){return new(e||n)(f(h))};static \u0275cmp=m({type:n,selectors:[["app-board"]],standalone:!0,features:[c],decls:7,vars:3,consts:[[1,"board"],["class","column",4,"ngFor","ngForOf"],[1,"result-window"],[1,"move-count"],[1,"result"],[1,"column"],[3,"moveNumber","highlight","firstColor","secondColor","hasKnight","click",4,"ngFor","ngForOf"],[3,"click","moveNumber","highlight","firstColor","secondColor","hasKnight"]],template:function(e,o){e&1&&(r(0,"div",0),b(1,Q,2,1,"div",1),i(),r(2,"div",2)(3,"p",3),l(4),i(),r(5,"p",4),l(6),i()()),e&2&&(a(),p("ngForOf",o.board),a(3),k("Move count: ",o.moveCount,""),a(2),k("Result: ",o.result,""))},dependencies:[T,E,x],styles:[".board[_ngcontent-%COMP%]{display:grid;background-color:#fff;width:fit-content;border:8px solid #BC6C25;border-radius:15px;grid-template-columns:repeat(10,50px);grid-template-rows:repeat(10,50px)}.result-window[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:25px}.result[_ngcontent-%COMP%], .move-count[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#283618}"]})};var S=class n{constructor(t){this.gameService=t}resetGame(){this.gameService.restartGame()}static \u0275fac=function(e){return new(e||n)(f(h))};static \u0275cmp=m({type:n,selectors:[["app-game-controls"]],standalone:!0,features:[c],decls:2,vars:0,consts:[[3,"click"]],template:function(e,o){e&1&&(r(0,"button",0),C("click",function(){return o.resetGame()}),l(1,"Reset Game"),i())},styles:["button[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;padding:10px 20px;margin-top:20px;cursor:pointer;background-color:#dda15e;color:#fefae0;border:none;border-radius:5px;transition:background-color .3s}button[_ngcontent-%COMP%]:hover{background-color:#555}"]})};var M=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=m({type:n,selectors:[["app-root"]],standalone:!0,features:[c],decls:5,vars:0,consts:[[1,"app-container"]],template:function(e,o){e&1&&(r(0,"main",0)(1,"h1"),l(2,"Atomic Knight Game"),i(),v(3,"app-board")(4,"app-game-controls"),i())},dependencies:[_,S],styles:[".app-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;background:linear-gradient(to bottom right,#fefae0,#ebc498);min-height:100vh;min-width:100vh}.app-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;font-family:Times New Roman,serif;margin-bottom:20px;color:#283618}"]})};var H={providers:[A({eventCoalescing:!0}),V()]};var U={providers:[z()]},Y=D(H,U);var W=()=>$(M,Y),_e=W;export{_e as a};
